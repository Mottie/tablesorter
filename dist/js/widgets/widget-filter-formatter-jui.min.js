(function(factory){if (typeof define === 'function' && define.amd){define(['jquery'], factory);} else if (typeof module === 'object' && typeof module.exports === 'object'){module.exports = factory(require('jquery'));} else {factory(jQuery);}}(function(jQuery){
/*! Widget: filter jQuery UI formatter functions - updated 7/17/2014 (v2.17.5) */
!function(c){"use strict";var p=c.tablesorter||{},f=".compare-select",u=p.filterFormatter=c.extend({},p.filterFormatter,{addCompare:function(e,a,t){var n,d,l;t.compare&&c.isArray(t.compare)&&1<t.compare.length&&(n="",d=[f.slice(1)," "+f.slice(1),""],l=t.cellText?'<label class="'+d.join("-label")+a+'">'+t.cellText+"</label>":"",c.each(t.compare,function(e,a){n+="<option "+(t.selected===e?"selected":"")+">"+a+"</option>"}),e.wrapInner('<div class="'+d.join("-wrapper")+a+'" />').prepend(l+'<select class="'+d.join("")+a+'" />').find("select").append(n))},updateCompare:function(e,a,t){var a=a.val()||"",n=a.replace(/\s*?[><=]\s*?/g,""),d=a.match(/[><=]/g)||"";return t.compare&&(c.isArray(t.compare)&&(d=(d||[]).join("")||t.compare[t.selected||0]),e.find(f).val(d)),[a,n]},uiSpinner:function(i,a,e){var o=c.extend({delayed:!0,addToggle:!0,exactMatch:!0,value:1,cellText:"",compare:"",min:0,max:100,step:1,disabled:!1},e),r=i.closest("table")[0].config,t=c('<input class="filter" type="hidden">').appendTo(i).on("change"+r.namespace+"filter",function(){n({value:this.value,delayed:!1})}),s=[],n=function(e,a){var t,n=!0,d=e&&e.value&&p.formatFloat((e.value+"").replace(/[><=]/g,""))||i.find(".spinner").val()||o.value,l=(c.isArray(o.compare)?i.find(f).val()||o.compare[o.selected||0]:o.compare)||"",e=e&&"boolean"==typeof e.delayed?e.delayed:!r.$table[0].hasInitialized||o.delayed||"";o.addToggle&&(n=i.find(".toggle").is(":checked")),t=o.disabled||!n?"disable":"enable",p.isEmptyObject(i.find(".spinner").data())||(i.find(".filter").val(n?(l||(o.exactMatch?"=":""))+d:"").trigger(a?"":"search",e).end().find(".spinner").spinner(t).val(d),s.length&&(s.find(".spinner").spinner(t).val(d).end().find(f).val(l),o.addToggle)&&(s.find(".toggle")[0].checked=n))};return o.oldcreate=o.create,o.oldspin=o.spin,o.create=function(e,a){n(),"function"==typeof o.oldcreate&&o.oldcreate(e,a)},o.spin=function(e,a){n(a),"function"==typeof o.oldspin&&o.oldspin(e,a)},o.addToggle&&c('<div class="button"><input id="uispinnerbutton'+a+'" type="checkbox" class="toggle" /><label for="uispinnerbutton'+a+'"></label></div>').appendTo(i).find(".toggle").on("change",function(){n()}),i.closest("thead").find("th[data-column="+a+"]").addClass("filter-parsed"),c('<input class="spinner spinner'+a+'" />').val(o.value).appendTo(i).spinner(o).on("change keyup",function(){n()}),r.$table.on("filterFomatterUpdate"+r.namespace+"filter",function(){var e=u.updateCompare(i,t,o)[0];i.find(".spinner").val(e),n({value:e},!0),p.filter.formatterUpdated(i,a)}),o.compare&&(u.addCompare(i,a,o),i.find(f).on("change",function(){n()})),r.$table.on("stickyHeadersInit"+r.namespace+"filter",function(){s=r.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(a).empty(),o.addToggle&&c('<div class="button"><input id="stickyuispinnerbutton'+a+'" type="checkbox" class="toggle" /><label for="stickyuispinnerbutton'+a+'"></label></div>').appendTo(s).find(".toggle").on("change",function(){i.find(".toggle")[0].checked=this.checked,n()}),c('<input class="spinner spinner'+a+'" />').val(o.value).appendTo(s).spinner(o).on("change keyup",function(){i.find(".spinner").val(this.value),n()}),o.compare&&(u.addCompare(s,a,o),s.find(f).on("change",function(){i.find(f).val(c(this).val()),n()}))}),r.$table.on("filterReset"+r.namespace+"filter",function(){c.isArray(o.compare)&&i.add(s).find(f).val(o.compare[o.selected||0]),o.addToggle&&(i.find(".toggle")[0].checked=!1),i.find(".spinner").spinner("value",o.value),setTimeout(function(){n()},0)}),n(),t},uiSlider:function(l,i,e){var o=c.extend({delayed:!0,valueToHeader:!1,exactMatch:!0,cellText:"",compare:"",allText:"all",value:0,min:0,max:100,step:1,range:"min"},e),r=l.closest("table")[0].config,a=c('<input class="filter" type="hidden">').appendTo(l).on("change"+r.namespace+"filter",function(){t({value:this.value})}),s=[],t=function(e,a){var t=void 0!==e&&p.formatFloat((e.value+"").replace(/[><=]/g,""))||o.value,n=!o.compare&&t===o.min?o.allText:t,d=(c.isArray(o.compare)?l.find(f).val()||o.compare[o.selected||0]:o.compare)||"",n=d+n,e=e&&"boolean"==typeof e.delayed?e.delayed:!r.$table[0].hasInitialized||o.delayed||"";o.valueToHeader?l.closest("thead").find("th[data-column="+i+"]").find(".curvalue").html(" ("+n+")"):l.find(".ui-slider-handle").addClass("value-popup").attr("data-value",n),p.isEmptyObject(l.find(".slider").data())||(l.find(".filter").val(d?d+t:t===o.min?"":(o.exactMatch?"=":"")+t).trigger(a?"":"search",e).end().find(".slider").slider("value",t),s.length&&(s.find(f).val(d).end().find(".slider").slider("value",t),o.valueToHeader?s.closest("thead").find("th[data-column="+i+"]").find(".curvalue").html(" ("+n+")"):s.find(".ui-slider-handle").addClass("value-popup").attr("data-value",n)))};return l.closest("thead").find("th[data-column="+i+"]").addClass("filter-parsed"),o.valueToHeader&&l.closest("thead").find("th[data-column="+i+"]").find(".tablesorter-header-inner").append('<span class="curvalue" />'),o.oldcreate=o.create,o.oldslide=o.slide,o.create=function(e,a){t(),"function"==typeof o.oldcreate&&o.oldcreate(e,a)},o.slide=function(e,a){t(a),"function"==typeof o.oldslide&&o.oldslide(e,a)},c('<div class="slider slider'+i+'"/>').appendTo(l).slider(o),r.$table.on("filterFomatterUpdate"+r.namespace+"filter",function(){var e=u.updateCompare(l,a,o)[0];l.find(".slider").slider("value",e),t({value:e},!1),p.filter.formatterUpdated(l,i)}),o.compare&&(u.addCompare(l,i,o),l.find(f).on("change",function(){t({value:l.find(".slider").slider("value")})})),r.$table.on("filterReset"+r.namespace+"filter",function(){c.isArray(o.compare)&&l.add(s).find(f).val(o.compare[o.selected||0]),setTimeout(function(){t({value:o.value})},0)}),r.$table.on("stickyHeadersInit"+r.namespace+"filter",function(){s=r.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(i).empty(),c('<div class="slider slider'+i+'"/>').val(o.value).appendTo(s).slider(o).on("change keyup",function(){l.find(".slider").slider("value",this.value),t()}),o.compare&&(u.addCompare(s,i,o),s.find(f).on("change",function(){l.find(f).val(c(this).val()),t()}))}),a},uiRange:function(l,i,e){var o=c.extend({delayed:!0,valueToHeader:!1,values:[0,100],min:0,max:100,range:!0},e),r=l.closest("table")[0].config,t=c('<input class="filter" type="hidden">').appendTo(l).on("change"+r.namespace+"filter",function(){a()}),s=[],a=function(){var e=t.val(),a=e.split(" - ");(a=""===e?[o.min,o.max]:a)&&a[1]&&n({values:a,delay:!1},!0)},n=function(e,a){var t=e&&e.values||o.values,n=t[0]+" - "+t[1],d=t[0]===o.min&&t[1]===o.max?"":n,e=e&&"boolean"==typeof e.delayed?e.delayed:!r.$table[0].hasInitialized||o.delayed||"";o.valueToHeader?l.closest("thead").find("th[data-column="+i+"]").find(".currange").html(" ("+n+")"):l.find(".ui-slider-handle").addClass("value-popup").eq(0).attr("data-value",t[0]).end().eq(1).attr("data-value",t[1]),p.isEmptyObject(l.find(".range").data())||(l.find(".filter").val(d).trigger(a?"":"search",e).end().find(".range").slider("values",t),s.length&&(s.find(".range").slider("values",t),o.valueToHeader?s.closest("thead").find("th[data-column="+i+"]").find(".currange").html(" ("+n+")"):s.find(".ui-slider-handle").addClass("value-popup").eq(0).attr("data-value",t[0]).end().eq(1).attr("data-value",t[1])))};return l.closest("thead").find("th[data-column="+i+"]").addClass("filter-parsed"),o.valueToHeader&&l.closest("thead").find("th[data-column="+i+"]").find(".tablesorter-header-inner").append('<span class="currange"/>'),o.oldcreate=o.create,o.oldslide=o.slide,o.create=function(e,a){n(),"function"==typeof o.oldcreate&&o.oldcreate(e,a)},o.slide=function(e,a){n(a),"function"==typeof o.oldslide&&o.oldslide(e,a)},c('<div class="range range'+i+'"/>').appendTo(l).slider(o),r.$table.on("filterFomatterUpdate"+r.namespace+"filter",function(){a(),p.filter.formatterUpdated(l,i)}),r.$table.on("filterReset"+r.namespace+"filter",function(){l.find(".range").slider("values",o.values),setTimeout(function(){n()},0)}),r.$table.on("stickyHeadersInit"+r.namespace+"filter",function(){s=r.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(i).empty(),c('<div class="range range'+i+'"/>').val(o.value).appendTo(s).slider(o).on("change keyup",function(){l.find(".range").val(this.value),n()})}),t},uiDateCompare:function(l,t,e){function n(e){var a,t=s.datepicker("getDate")||"",n=(c.isArray(i.compare)?l.find(f).val()||i.compare[i.selected||0]:i.compare)||"",d=!o.$table[0].hasInitialized||i.delayed||"";s.datepicker("setDate",(""===t?"":t)||null),""===t&&(e=!1),a=(t=s.datepicker("getDate"))&&(i.endOfDay&&/<=/.test(n)?t.setHours(23,59,59,999):t.getTime())||"",t&&i.endOfDay&&"="===n&&(n="",a+=" - "+t.setHours(23,59,59,999),e=!1),l.find(".dateCompare").val(n+a).trigger(e?"":"search",d).end(),r.length&&r.find(".dateCompare").val(n+a).end().find(f).val(n)}var i=c.extend({cellText:"",compare:"",endOfDay:!0,defaultDate:"",changeMonth:!0,changeYear:!0,numberOfMonths:1},e),o=l.closest("table")[0].config,e=l.closest("thead").find("th[data-column="+t+"]").addClass("filter-parsed"),d=c('<input class="dateCompare" type="hidden">').appendTo(l).on("change"+o.namespace+"filter",function(){var e=this.value;e&&i.onClose(e)}),r=[],a='<input type="text" class="date date'+t+'" placeholder="'+(e.data("placeholder")||e.attr("data-placeholder")||o.widgetOptions.filter_placeholder.search||"")+'" />',s=c(a).appendTo(l);return i.oldonClose=i.onClose,i.onClose=function(e,a){n(),"function"==typeof i.oldonClose&&i.oldonClose(e,a)},s.datepicker(i),o.$table.on("filterReset"+o.namespace+"filter",function(){c.isArray(i.compare)&&l.add(r).find(f).val(i.compare[i.selected||0]),l.add(r).find(".date").val(i.defaultDate).datepicker("setDate",i.defaultDate||null),setTimeout(function(){n()},0)}),o.$table.on("filterFomatterUpdate"+o.namespace+"filter",function(){var e,a=d.val();/\s+-\s+/.test(a)?(l.find(f).val("="),e=a.split(/\s+-\s+/)[0],s.datepicker("setDate",e||null)):e=""!==(e=u.updateCompare(l,d,i)[1].toString()||"")?/\d{5}/g.test(e)?new Date(Number(e)):e||"":"",l.add(r).find(".date").datepicker("setDate",e||null),setTimeout(function(){n(!0),p.filter.formatterUpdated(l,t)},0)}),i.compare&&(u.addCompare(l,t,i),l.find(f).on("change",function(){n()})),o.$table.on("stickyHeadersInit"+o.namespace+"filter",function(){(r=o.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(t).empty()).append(a).find(".date").datepicker(i),i.compare&&(u.addCompare(r,t,i),r.find(f).on("change",function(){l.find(f).val(c(this).val()),n()}))}),d.val(i.defaultDate||"")},uiDatepicker:function(l,n,e){function i(e){return e instanceof Date&&isFinite(e)}var d,o=c.extend({endOfDay:!0,textFrom:"from",textTo:"to",from:"",to:"",changeMonth:!0,changeYear:!0,numberOfMonths:1},e),r=[],a=l.closest("table")[0].config,s=c('<input class="dateRange" type="hidden">').appendTo(l).on("change"+a.namespace+"filter",function(){var e=this.value;e.match(" - ")?(e=e.split(" - "),l.find(".dateTo").val(e[1]),d(e[0])):e.match(">=")?d(e.replace(">=","")):e.match("<=")&&d(e.replace("<=",""))}),e=l.closest("thead").find("th[data-column="+n+"]").addClass("filter-parsed"),t="<label>"+o.textFrom+'</label><input type="text" class="dateFrom" placeholder="'+(e.data("placeholderFrom")||e.attr("data-placeholder-from")||a.widgetOptions.filter_placeholder.from||"")+'" /><label>'+o.textTo+'</label><input type="text" class="dateTo" placeholder="'+(e.data("placeholderTo")||e.attr("data-placeholder-to")||a.widgetOptions.filter_placeholder.to||"")+'" />';return c(t).appendTo(l),o.oldonClose=o.onClose,d=o.onClose=function(e,a){var t=l.find(".dateFrom").datepicker("getDate"),n=l.find(".dateTo").datepicker("getDate"),t=i(t)?t.getTime():"",n=i(n)&&(o.endOfDay?n.setHours(23,59,59,999):n.getTime())||"",d=t?n?t+" - "+n:">="+t:n?"<="+n:"";l.add(r).find(".dateRange").val(d).trigger("search"),t=t?new Date(t):"",n=n?new Date(n):"",/<=/.test(d)?l.add(r).find(".dateFrom").datepicker("option","maxDate",n||null).end().find(".dateTo").datepicker("option","minDate",null).datepicker("setDate",n||null):/>=/.test(d)?l.add(r).find(".dateFrom").datepicker("option","maxDate",null).datepicker("setDate",t||null).end().find(".dateTo").datepicker("option","minDate",t||null):l.add(r).find(".dateFrom").datepicker("option","maxDate",null).datepicker("setDate",t||null).end().find(".dateTo").datepicker("option","minDate",null).datepicker("setDate",n||null),"function"==typeof o.oldonClose&&o.oldonClose(e,a)},o.defaultDate=o.from||"",l.find(".dateFrom").datepicker(o),o.defaultDate=o.to||"+7d",l.find(".dateTo").datepicker(o),a.$table.on("filterFomatterUpdate"+a.namespace+"filter",function(){var e=s.val()||"",a="",t="";/\s+-\s+/.test(e)?(a=(e=e.split(/\s+-\s+/)||[])[0]||"",t=e[1]||""):/>=/.test(e)?a=e.replace(/>=/,"")||"":/<=/.test(e)&&(t=e.replace(/<=/,"")||""),a=""!==a?/\d{5}/g.test(a)?new Date(Number(a)):a||"":"",t=""!==t?/\d{5}/g.test(t)?new Date(Number(t)):t||"":"",l.add(r).find(".dateFrom").datepicker("setDate",a||null),l.add(r).find(".dateTo").datepicker("setDate",t||null),setTimeout(function(){d(),p.filter.formatterUpdated(l,n)},0)}),a.$table.on("stickyHeadersInit"+a.namespace+"filter",function(){(r=a.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(n).empty()).append(t),o.defaultDate=o.from||"",r.find(".dateFrom").datepicker(o),o.defaultDate=o.to||"+7d",r.find(".dateTo").datepicker(o)}),l.closest("table").on("filterReset"+a.namespace+"filter",function(){l.add(r).find(".dateFrom").val("").datepicker("setDate",o.from||null),l.add(r).find(".dateTo").val("").datepicker("setDate",o.to||null),setTimeout(function(){d()},0)}),s.val(o.from?o.to?o.from+" - "+o.to:">="+o.from:o.to?"<="+o.to:"")}})}(jQuery);return jQuery;}));
