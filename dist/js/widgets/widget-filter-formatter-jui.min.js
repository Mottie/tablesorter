(function(factory){if (typeof define === 'function' && define.amd){define(['jquery'], factory);} else if (typeof module === 'object' && typeof module.exports === 'object'){module.exports = factory(require('jquery'));} else {factory(jQuery);}}(function(jQuery){

/*! Widget: filter jQuery UI formatter functions - updated 7/17/2014 (v2.17.5) */
!function(c){"use strict";var p=c.tablesorter||{},f=".compare-select",u=p.filterFormatter=c.extend({},p.filterFormatter,{addCompare:function(e,a,t){var n,d,l;t.compare&&Array.isArray(t.compare)&&1<t.compare.length&&(n="",d=[f.slice(1)," "+f.slice(1),""],l=t.cellText?'<label class="'+d.join("-label")+a+'">'+t.cellText+"</label>":"",c.each(t.compare,function(e,a){n+="<option "+(t.selected===e?"selected":"")+">"+a+"</option>"}),e.wrapInner('<div class="'+d.join("-wrapper")+a+'" />').prepend(l+'<select class="'+d.join("")+a+'" />').find("select").append(n))},updateCompare:function(e,a,t){var n=a.val()||"",d=n.replace(/\s*?[><=]\s*?/g,""),a=n.match(/[><=]/g)||"";return t.compare&&(Array.isArray(t.compare)&&(a=(a||[]).join("")||t.compare[t.selected||0]),e.find(f).val(a)),[n,d]},uiSpinner:function(i,a,e){var r=c.extend({delayed:!0,addToggle:!0,exactMatch:!0,value:1,cellText:"",compare:"",min:0,max:100,step:1,disabled:!1},e),o=i.closest("table")[0].config,t=c('<input class="filter" type="hidden">').appendTo(i).on("change"+o.namespace+"filter",function(){n({value:this.value,delayed:!1})}),s=[],n=function(e,a){var t=!0,n=e&&e.value&&p.formatFloat((e.value+"").replace(/[><=]/g,""))||i.find(".spinner").val()||r.value,d=(Array.isArray(r.compare)?i.find(f).val()||r.compare[r.selected||0]:r.compare)||"",l=e&&"boolean"==typeof e.delayed?e.delayed:!o.$table[0].hasInitialized||(r.delayed||"");r.addToggle&&(t=i.find(".toggle").is(":checked")),e=r.disabled||!t?"disable":"enable",p.isEmptyObject(i.find(".spinner").data())||(i.find(".filter").val(t?(d||(r.exactMatch?"=":""))+n:"").trigger(a?"":"search",l).end().find(".spinner").spinner(e).val(n),s.length&&(s.find(".spinner").spinner(e).val(n).end().find(f).val(d),r.addToggle&&(s.find(".toggle")[0].checked=t)))};return r.oldcreate=r.create,r.oldspin=r.spin,r.create=function(e,a){n(),"function"==typeof r.oldcreate&&r.oldcreate(e,a)},r.spin=function(e,a){n(a),"function"==typeof r.oldspin&&r.oldspin(e,a)},r.addToggle&&c('<div class="button"><input id="uispinnerbutton'+a+'" type="checkbox" class="toggle" /><label for="uispinnerbutton'+a+'"></label></div>').appendTo(i).find(".toggle").on("change",function(){n()}),i.closest("thead").find("th[data-column="+a+"]").addClass("filter-parsed"),c('<input class="spinner spinner'+a+'" />').val(r.value).appendTo(i).spinner(r).on("change keyup",function(){n()}),o.$table.on("filterFomatterUpdate"+o.namespace+"filter",function(){var e=u.updateCompare(i,t,r)[0];i.find(".spinner").val(e),n({value:e},!0),p.filter.formatterUpdated(i,a)}),r.compare&&(u.addCompare(i,a,r),i.find(f).on("change",function(){n()})),o.$table.on("stickyHeadersInit"+o.namespace+"filter",function(){s=o.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(a).empty(),r.addToggle&&c('<div class="button"><input id="stickyuispinnerbutton'+a+'" type="checkbox" class="toggle" /><label for="stickyuispinnerbutton'+a+'"></label></div>').appendTo(s).find(".toggle").on("change",function(){i.find(".toggle")[0].checked=this.checked,n()}),c('<input class="spinner spinner'+a+'" />').val(r.value).appendTo(s).spinner(r).on("change keyup",function(){i.find(".spinner").val(this.value),n()}),r.compare&&(u.addCompare(s,a,r),s.find(f).on("change",function(){i.find(f).val(c(this).val()),n()}))}),o.$table.on("filterReset"+o.namespace+"filter",function(){Array.isArray(r.compare)&&i.add(s).find(f).val(r.compare[r.selected||0]),r.addToggle&&(i.find(".toggle")[0].checked=!1),i.find(".spinner").spinner("value",r.value),setTimeout(function(){n()},0)}),n(),t},uiSlider:function(l,i,e){var r=c.extend({delayed:!0,valueToHeader:!1,exactMatch:!0,cellText:"",compare:"",allText:"all",value:0,min:0,max:100,step:1,range:"min"},e),o=l.closest("table")[0].config,a=c('<input class="filter" type="hidden">').appendTo(l).on("change"+o.namespace+"filter",function(){t({value:this.value})}),s=[],t=function(e,a){var t=void 0!==e&&p.formatFloat((e.value+"").replace(/[><=]/g,""))||r.value,n=!r.compare&&t===r.min?r.allText:t,d=(Array.isArray(r.compare)?l.find(f).val()||r.compare[r.selected||0]:r.compare)||"",n=d+n,e=e&&"boolean"==typeof e.delayed?e.delayed:!o.$table[0].hasInitialized||(r.delayed||"");r.valueToHeader?l.closest("thead").find("th[data-column="+i+"]").find(".curvalue").html(" ("+n+")"):l.find(".ui-slider-handle").addClass("value-popup").attr("data-value",n),p.isEmptyObject(l.find(".slider").data())||(l.find(".filter").val(d?d+t:t===r.min?"":(r.exactMatch?"=":"")+t).trigger(a?"":"search",e).end().find(".slider").slider("value",t),s.length&&(s.find(f).val(d).end().find(".slider").slider("value",t),r.valueToHeader?s.closest("thead").find("th[data-column="+i+"]").find(".curvalue").html(" ("+n+")"):s.find(".ui-slider-handle").addClass("value-popup").attr("data-value",n)))};return l.closest("thead").find("th[data-column="+i+"]").addClass("filter-parsed"),r.valueToHeader&&l.closest("thead").find("th[data-column="+i+"]").find(".tablesorter-header-inner").append('<span class="curvalue" />'),r.oldcreate=r.create,r.oldslide=r.slide,r.create=function(e,a){t(),"function"==typeof r.oldcreate&&r.oldcreate(e,a)},r.slide=function(e,a){t(a),"function"==typeof r.oldslide&&r.oldslide(e,a)},c('<div class="slider slider'+i+'"/>').appendTo(l).slider(r),o.$table.on("filterFomatterUpdate"+o.namespace+"filter",function(){var e=u.updateCompare(l,a,r)[0];l.find(".slider").slider("value",e),t({value:e},!1),p.filter.formatterUpdated(l,i)}),r.compare&&(u.addCompare(l,i,r),l.find(f).on("change",function(){t({value:l.find(".slider").slider("value")})})),o.$table.on("filterReset"+o.namespace+"filter",function(){Array.isArray(r.compare)&&l.add(s).find(f).val(r.compare[r.selected||0]),setTimeout(function(){t({value:r.value})},0)}),o.$table.on("stickyHeadersInit"+o.namespace+"filter",function(){s=o.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(i).empty(),c('<div class="slider slider'+i+'"/>').val(r.value).appendTo(s).slider(r).on("change keyup",function(){l.find(".slider").slider("value",this.value),t()}),r.compare&&(u.addCompare(s,i,r),s.find(f).on("change",function(){l.find(f).val(c(this).val()),t()}))}),a},uiRange:function(l,i,e){var r=c.extend({delayed:!0,valueToHeader:!1,values:[0,100],min:0,max:100,range:!0},e),o=l.closest("table")[0].config,t=c('<input class="filter" type="hidden">').appendTo(l).on("change"+o.namespace+"filter",function(){a()}),s=[],a=function(){var e=t.val(),a=e.split(" - ");(a=""===e?[r.min,r.max]:a)&&a[1]&&n({values:a,delay:!1},!0)},n=function(e,a){var t=e&&e.values||r.values,n=t[0]+" - "+t[1],d=t[0]===r.min&&t[1]===r.max?"":n,e=e&&"boolean"==typeof e.delayed?e.delayed:!o.$table[0].hasInitialized||(r.delayed||"");r.valueToHeader?l.closest("thead").find("th[data-column="+i+"]").find(".currange").html(" ("+n+")"):l.find(".ui-slider-handle").addClass("value-popup").eq(0).attr("data-value",t[0]).end().eq(1).attr("data-value",t[1]),p.isEmptyObject(l.find(".range").data())||(l.find(".filter").val(d).trigger(a?"":"search",e).end().find(".range").slider("values",t),s.length&&(s.find(".range").slider("values",t),r.valueToHeader?s.closest("thead").find("th[data-column="+i+"]").find(".currange").html(" ("+n+")"):s.find(".ui-slider-handle").addClass("value-popup").eq(0).attr("data-value",t[0]).end().eq(1).attr("data-value",t[1])))};return l.closest("thead").find("th[data-column="+i+"]").addClass("filter-parsed"),r.valueToHeader&&l.closest("thead").find("th[data-column="+i+"]").find(".tablesorter-header-inner").append('<span class="currange"/>'),r.oldcreate=r.create,r.oldslide=r.slide,r.create=function(e,a){n(),"function"==typeof r.oldcreate&&r.oldcreate(e,a)},r.slide=function(e,a){n(a),"function"==typeof r.oldslide&&r.oldslide(e,a)},c('<div class="range range'+i+'"/>').appendTo(l).slider(r),o.$table.on("filterFomatterUpdate"+o.namespace+"filter",function(){a(),p.filter.formatterUpdated(l,i)}),o.$table.on("filterReset"+o.namespace+"filter",function(){l.find(".range").slider("values",r.values),setTimeout(function(){n()},0)}),o.$table.on("stickyHeadersInit"+o.namespace+"filter",function(){s=o.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(i).empty(),c('<div class="range range'+i+'"/>').val(r.value).appendTo(s).slider(r).on("change keyup",function(){l.find(".range").val(this.value),n()})}),t},uiDateCompare:function(l,t,e){function n(e){var a,t=s.datepicker("getDate")||"",n=(Array.isArray(i.compare)?l.find(f).val()||i.compare[i.selected||0]:i.compare)||"",d=!r.$table[0].hasInitialized||(i.delayed||"");s.datepicker("setDate",(""===t?"":t)||null),""===t&&(e=!1),t=(a=s.datepicker("getDate"))&&(i.endOfDay&&/<=/.test(n)?a.setHours(23,59,59,999):a.getTime())||"",a&&i.endOfDay&&"="===n&&(n="",t+=" - "+a.setHours(23,59,59,999),e=!1),l.find(".dateCompare").val(n+t).trigger(e?"":"search",d).end(),o.length&&o.find(".dateCompare").val(n+t).end().find(f).val(n)}var i=c.extend({cellText:"",compare:"",endOfDay:!0,defaultDate:"",changeMonth:!0,changeYear:!0,numberOfMonths:1},e),r=l.closest("table")[0].config,e=l.closest("thead").find("th[data-column="+t+"]").addClass("filter-parsed"),d=c('<input class="dateCompare" type="hidden">').appendTo(l).on("change"+r.namespace+"filter",function(){var e=this.value;e&&i.onClose(e)}),o=[],a='<input type="text" class="date date'+t+'" placeholder="'+(e.data("placeholder")||e.attr("data-placeholder")||r.widgetOptions.filter_placeholder.search||"")+'" />',s=c(a).appendTo(l);return i.oldonClose=i.onClose,i.onClose=function(e,a){n(),"function"==typeof i.oldonClose&&i.oldonClose(e,a)},s.datepicker(i),r.$table.on("filterReset"+r.namespace+"filter",function(){Array.isArray(i.compare)&&l.add(o).find(f).val(i.compare[i.selected||0]),l.add(o).find(".date").val(i.defaultDate).datepicker("setDate",i.defaultDate||null),setTimeout(function(){n()},0)}),r.$table.on("filterFomatterUpdate"+r.namespace+"filter",function(){var e,a=d.val();/\s+-\s+/.test(a)?(l.find(f).val("="),e=a.split(/\s+-\s+/)[0],s.datepicker("setDate",e||null)):e=""!==(e=u.updateCompare(l,d,i)[1].toString()||"")?/\d{5}/g.test(e)?new Date(Number(e)):e||"":"",l.add(o).find(".date").datepicker("setDate",e||null),setTimeout(function(){n(!0),p.filter.formatterUpdated(l,t)},0)}),i.compare&&(u.addCompare(l,t,i),l.find(f).on("change",function(){n()})),r.$table.on("stickyHeadersInit"+r.namespace+"filter",function(){(o=r.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(t).empty()).append(a).find(".date").datepicker(i),i.compare&&(u.addCompare(o,t,i),o.find(f).on("change",function(){l.find(f).val(c(this).val()),n()}))}),d.val(i.defaultDate||"")},uiDatepicker:function(l,n,e){function i(e){return e instanceof Date&&isFinite(e)}var d,r=c.extend({endOfDay:!0,textFrom:"from",textTo:"to",from:"",to:"",changeMonth:!0,changeYear:!0,numberOfMonths:1},e),o=[],a=l.closest("table")[0].config,s=c('<input class="dateRange" type="hidden">').appendTo(l).on("change"+a.namespace+"filter",function(){var e=this.value;e.match(" - ")?(e=e.split(" - "),l.find(".dateTo").val(e[1]),d(e[0])):e.match(">=")?d(e.replace(">=","")):e.match("<=")&&d(e.replace("<=",""))}),e=l.closest("thead").find("th[data-column="+n+"]").addClass("filter-parsed"),t="<label>"+r.textFrom+'</label><input type="text" class="dateFrom" placeholder="'+(e.data("placeholderFrom")||e.attr("data-placeholder-from")||a.widgetOptions.filter_placeholder.from||"")+'" /><label>'+r.textTo+'</label><input type="text" class="dateTo" placeholder="'+(e.data("placeholderTo")||e.attr("data-placeholder-to")||a.widgetOptions.filter_placeholder.to||"")+'" />';return c(t).appendTo(l),r.oldonClose=r.onClose,d=r.onClose=function(e,a){var t=l.find(".dateFrom").datepicker("getDate"),n=l.find(".dateTo").datepicker("getDate"),t=i(t)?t.getTime():"",n=i(n)&&(r.endOfDay?n.setHours(23,59,59,999):n.getTime())||"",d=t?n?t+" - "+n:">="+t:n?"<="+n:"";l.add(o).find(".dateRange").val(d).trigger("search"),t=t?new Date(t):"",n=n?new Date(n):"",/<=/.test(d)?l.add(o).find(".dateFrom").datepicker("option","maxDate",n||null).end().find(".dateTo").datepicker("option","minDate",null).datepicker("setDate",n||null):/>=/.test(d)?l.add(o).find(".dateFrom").datepicker("option","maxDate",null).datepicker("setDate",t||null).end().find(".dateTo").datepicker("option","minDate",t||null):l.add(o).find(".dateFrom").datepicker("option","maxDate",null).datepicker("setDate",t||null).end().find(".dateTo").datepicker("option","minDate",null).datepicker("setDate",n||null),"function"==typeof r.oldonClose&&r.oldonClose(e,a)},r.defaultDate=r.from||"",l.find(".dateFrom").datepicker(r),r.defaultDate=r.to||"+7d",l.find(".dateTo").datepicker(r),a.$table.on("filterFomatterUpdate"+a.namespace+"filter",function(){var e=s.val()||"",a="",t="";/\s+-\s+/.test(e)?(a=(e=e.split(/\s+-\s+/)||[])[0]||"",t=e[1]||""):/>=/.test(e)?a=e.replace(/>=/,"")||"":/<=/.test(e)&&(t=e.replace(/<=/,"")||""),a=""!==a?/\d{5}/g.test(a)?new Date(Number(a)):a||"":"",t=""!==t?/\d{5}/g.test(t)?new Date(Number(t)):t||"":"",l.add(o).find(".dateFrom").datepicker("setDate",a||null),l.add(o).find(".dateTo").datepicker("setDate",t||null),setTimeout(function(){d(),p.filter.formatterUpdated(l,n)},0)}),a.$table.on("stickyHeadersInit"+a.namespace+"filter",function(){(o=a.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(n).empty()).append(t),r.defaultDate=r.from||"",o.find(".dateFrom").datepicker(r),r.defaultDate=r.to||"+7d",o.find(".dateTo").datepicker(r)}),l.closest("table").on("filterReset"+a.namespace+"filter",function(){l.add(o).find(".dateFrom").val("").datepicker("setDate",r.from||null),l.add(o).find(".dateTo").val("").datepicker("setDate",r.to||null),setTimeout(function(){d()},0)}),s.val(r.from?r.to?r.from+" - "+r.to:">="+r.from:r.to?"<="+r.to:"")}})}(jQuery);return jQuery;}));
