(function(factory){if (typeof define === 'function' && define.amd){define(['jquery'], factory);} else if (typeof module === 'object' && typeof module.exports === 'object'){module.exports = factory(require('jquery'));} else {factory(jQuery);}}(function(jQuery){

/*! Widget: filter, select2 formatter function - updated 12/1/2019 (v2.31.2) */
!function(g){"use strict";var b=g.tablesorter||{};b.filterFormatter=b.filterFormatter||{},b.filterFormatter.select2=function(a,c,e){function t(){i=[],l=b.filter.getOptionSource(s.$table[0],c,d)||[],g.each(l,function(e,t){i.push({id:""+t.parsed,text:t.text})}),n.data=i}var l,i,n=g.extend({cellText:"",match:!0,value:"",multiple:!0,width:"100%"},e),s=a.addClass("select2col"+c).closest("table")[0].config,r=s.widgetOptions,o=g('<input class="filter" type="hidden">').appendTo(a).on("change"+s.namespace+"filter",function(){var e=v(this.value);s.$table.find(".select2col"+c+" .select2").select2("val",e),$()}),e=s.$headerIndexed[c],d=e.hasClass(r.filter_onlyAvail),f=n.match?"":"^",p=n.match?"":"$",u=r.filter_ignoreCase?"i":"",v=function(e){return e.replace(/^\/\(\^?/,"").replace(/\$\|\^/g,"|").replace(/\$?\)\/i?$/g,"").replace(/\\/g,"").split("|")},$=function(){var e=!1,t=s.$table.find(".select2col"+c+" .select2").select2("val")||n.value||"";Array.isArray(t)&&(e=!0,t=t.join("\0"));var l=t.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&");e&&(t=t.split("\0"),l=l.split("\0")),b.isEmptyObject(a.find(".select2").data())||(o.val(Array.isArray(l)&&l.length&&""!==l.join("")?"/("+f+(l||[]).join(p+"|"+f)+p+")/"+u:"").trigger("search"),a.find(".select2").select2("val",t),s.widgetOptions.$sticky&&s.widgetOptions.$sticky.find(".select2col"+c+" .select2").select2("val",t))};return e.toggleClass("filter-match",n.match),n.cellText&&a.prepend("<label>"+n.cellText+"</label>"),n.ajax&&!g.isEmptyObject(n.ajax)||n.data||(t(),s.$table.on("filterEnd",function(){t(),s.$table.find(".select2col"+c).add(s.widgetOptions.$sticky&&s.widgetOptions.$sticky.find(".select2col"+c)).find(".select2").select2(n)})),g('<input class="select2 select2-'+c+'" type="hidden" />').val(n.value).appendTo(a).select2(n).on("change",function(){$()}),s.$table.on("filterFomatterUpdate",function(){var e=v(s.$table.data("lastSearch")[c]||"");(a=s.$table.find(".select2col"+c)).find(".select2").select2("val",e),$(),b.filter.formatterUpdated(a,c)}),s.$table.on("stickyHeadersInit",function(){var e=s.widgetOptions.$sticky.find(".select2col"+c).empty();g('<input class="select2 select2-'+c+'" type="hidden">').val(n.value).appendTo(e).select2(n).on("change",function(){s.$table.find(".select2col"+c).find(".select2").select2("val",s.widgetOptions.$sticky.find(".select2col"+c+" .select2").select2("val")),$()}),n.cellText&&e.prepend("<label>"+n.cellText+"</label>")}),s.$table.on("filterReset",function(){s.$table.find(".select2col"+c).find(".select2").select2("val",n.value||""),setTimeout(function(){$()},0)}),$(),o}}(jQuery);return jQuery;}));
