(function(factory){if (typeof define === 'function' && define.amd){define(['jquery'], factory);} else if (typeof module === 'object' && typeof module.exports === 'object'){module.exports = factory(require('jquery'));} else {factory(jQuery);}}(function(jQuery){
/*! Widget: filter, select2 formatter function - updated 12/1/2019 (v2.31.2) */
!function(g){"use strict";var b=g.tablesorter||{};b.filterFormatter=b.filterFormatter||{},b.filterFormatter.select2=function(c,a,e){function t(){i=[],l=b.filter.getOptionSource(s.$table[0],a,d)||[],g.each(l,function(e,t){i.push({id:""+t.parsed,text:t.text})}),n.data=i}var l,i,n=g.extend({cellText:"",match:!0,value:"",multiple:!0,width:"100%"},e),s=c.addClass("select2col"+a).closest("table")[0].config,e=s.widgetOptions,o=g('<input class="filter" type="hidden">').appendTo(c).on("change"+s.namespace+"filter",function(){var e=$(this.value);s.$table.find(".select2col"+a+" .select2").select2("val",e),v()}),r=s.$headerIndexed[a],d=r.hasClass(e.filter_onlyAvail),f=n.match?"":"^",p=n.match?"":"$",u=e.filter_ignoreCase?"i":"",$=function(e){return e.replace(/^\/\(\^?/,"").replace(/\$\|\^/g,"|").replace(/\$?\)\/i?$/g,"").replace(/\\/g,"").split("|")},v=function(){var e=!1,t=s.$table.find(".select2col"+a+" .select2").select2("val")||n.value||"",l=(g.isArray(t)&&(e=!0,t=t.join("\0")),t.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&"));e&&(t=t.split("\0"),l=l.split("\0")),b.isEmptyObject(c.find(".select2").data())||(o.val(g.isArray(l)&&l.length&&""!==l.join("")?"/("+f+(l||[]).join(p+"|"+f)+p+")/"+u:"").trigger("search"),c.find(".select2").select2("val",t),s.widgetOptions.$sticky&&s.widgetOptions.$sticky.find(".select2col"+a+" .select2").select2("val",t))};return r.toggleClass("filter-match",n.match),n.cellText&&c.prepend("<label>"+n.cellText+"</label>"),n.ajax&&!g.isEmptyObject(n.ajax)||n.data||(t(),s.$table.on("filterEnd",function(){t(),s.$table.find(".select2col"+a).add(s.widgetOptions.$sticky&&s.widgetOptions.$sticky.find(".select2col"+a)).find(".select2").select2(n)})),g('<input class="select2 select2-'+a+'" type="hidden" />').val(n.value).appendTo(c).select2(n).on("change",function(){v()}),s.$table.on("filterFomatterUpdate",function(){var e=$(s.$table.data("lastSearch")[a]||"");(c=s.$table.find(".select2col"+a)).find(".select2").select2("val",e),v(),b.filter.formatterUpdated(c,a)}),s.$table.on("stickyHeadersInit",function(){var e=s.widgetOptions.$sticky.find(".select2col"+a).empty();g('<input class="select2 select2-'+a+'" type="hidden">').val(n.value).appendTo(e).select2(n).on("change",function(){s.$table.find(".select2col"+a).find(".select2").select2("val",s.widgetOptions.$sticky.find(".select2col"+a+" .select2").select2("val")),v()}),n.cellText&&e.prepend("<label>"+n.cellText+"</label>")}),s.$table.on("filterReset",function(){s.$table.find(".select2col"+a).find(".select2").select2("val",n.value||""),setTimeout(function(){v()},0)}),v(),o}}(jQuery);return jQuery;}));
