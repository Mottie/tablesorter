(function(factory){if (typeof define === 'function' && define.amd){define(['jquery'], factory);} else if (typeof module === 'object' && typeof module.exports === 'object'){module.exports = factory(require('jquery'));} else {factory(jQuery);}}(function(jQuery){
/*! Widget: filter, html5 formatter functions - updated 7/17/2014 (v2.17.5) */
!function(p){"use strict";var u=p.tablesorter||{},f=".compare-select",m=u.filterFormatter=p.extend({},u.filterFormatter,{addCompare:function(e,t,a){var n,l,i;a.compare&&p.isArray(a.compare)&&1<a.compare.length&&(n="",l=[f.slice(1)," "+f.slice(1),""],i=a.cellText?'<label class="'+l.join("-label")+t+'">'+a.cellText+"</label>":"",p.each(a.compare,function(e,t){n+="<option "+(a.selected===e?"selected":"")+">"+t+"</option>"}),e.wrapInner('<div class="'+l.join("-wrapper")+t+'" />').prepend(i+'<select class="'+l.join("")+t+'" />').find("select").append(n))},updateCompare:function(e,t,a){var t=t.val()||"",n=t.replace(/\s*?[><=]\s*?/g,""),l=t.match(/[><=]/g)||"";return a.compare&&(p.isArray(a.compare)&&(l=(l||[]).join("")||a.compare[a.selected||0]),e.find(f).val(l)),[t,n]},html5Number:function(i,t,e){function a(e,t){var a=!o.addToggle||i.find(".toggle").is(":checked"),n=i.find(".number").val(),l=(p.isArray(o.compare)?i.find(f).val()||o.compare[o.selected||0]:o.compare)||"",e=!c.$table[0].hasInitialized||e||o.delayed||"";d.val(!o.addToggle||a?(l||(o.exactMatch?"=":""))+n:"").trigger(t?"":"search",e).end().find(".number").val(n),i.find(".number").length&&(i.find(".number")[0].disabled=o.disabled||!a),r.length&&(r.find(".number").val(n)[0].disabled=o.disabled||!a,r.find(f).val(l),o.addToggle)&&(r.find(".toggle")[0].checked=a)}var n,d,o=p.extend({value:0,min:0,max:100,step:1,delayed:!0,disabled:!1,addToggle:!1,exactMatch:!1,cellText:"",compare:"",skipTest:!1},e),e=p('<input type="number" style="visibility:hidden;" value="test">').appendTo(i),l=o.skipTest||"number"===e.attr("type")&&"test"!==e.val(),r=[],c=i.closest("table")[0].config;return e.remove(),l&&(n=o.addToggle?'<div class="button"><input id="html5button'+t+'" type="checkbox" class="toggle" /><label for="html5button'+t+'"></label></div>':"",n+='<input class="number" type="number" min="'+o.min+'" max="'+o.max+'" value="'+o.value+'" step="'+o.step+'" />',i.append(n+'<input type="hidden" />').find(".toggle, .number").on("change",function(){a()}).closest("thead").find("th[data-column="+t+"]").addClass("filter-parsed").closest("table").on("filterReset",function(){p.isArray(o.compare)&&i.add(r).find(f).val(o.compare[o.selected||0]),o.addToggle&&(i.find(".toggle")[0].checked=!1,r.length)&&(r.find(".toggle")[0].checked=!1),i.find(".number").val(o.value),setTimeout(function(){a()},0)}),d=i.find("input[type=hidden]").on("change",function(){i.find(".number").val(this.value),a()}),c.$table.on("filterFomatterUpdate",function(){var e=m.updateCompare(i,d,o)[0]||o.value;i.find(".number").val(((e||"")+"").replace(/[><=]/g,"")),a(!1,!0),u.filter.formatterUpdated(i,t)}),o.compare&&(m.addCompare(i,t,o),i.find(f).on("change",function(){a()})),c.$table.on("stickyHeadersInit",function(){(r=c.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(t).empty()).append(n).find(".toggle, .number").on("change",function(){i.find(".number").val(p(this).val()),a()}),o.compare&&(m.addCompare(r,t,o),r.find(f).on("change",function(){i.find(f).val(p(this).val()),a()})),a()}),a()),l?i.find('input[type="hidden"]'):p('<input type="search">')},html5Range:function(i,d,e){function a(e,t,a){e=(void 0===e?o.val():e).toString().replace(/[<>=]/g,"")||r.value;var n=(p.isArray(r.compare)?i.find(f).val()||r.compare[r.selected||0]:r.compare)||"",l=" ("+(n?n+e:e==r.min?r.allText:e)+")",t=!s.$table[0].hasInitialized||t||r.delayed||"";i.find("input[type=hidden]").val(n?n+e:e==r.min?"":(r.exactMatch?"=":"")+e).trigger(a?"":"search",t).end().find(".range").val(e),i.closest("thead").find("th[data-column="+d+"]").find(".curvalue").html(l),c.length&&(c.find(".range").val(e).end().find(f).val(n),c.closest("thead").find("th[data-column="+d+"]").find(".curvalue").html(l))}var o,r=p.extend({value:0,min:0,max:100,step:1,delayed:!0,valueToHeader:!0,exactMatch:!0,cellText:"",compare:"",allText:"all",skipTest:!1},e),e=p('<input type="range" style="visibility:hidden;" value="test">').appendTo(i),t=r.skipTest||"range"===e.attr("type")&&"test"!==e.val(),c=[],s=i.closest("table")[0].config;return e.remove(),t&&(i.html('<input type="hidden"><input class="range" type="range" min="'+r.min+'" max="'+r.max+'" value="'+r.value+'" />').closest("thead").find("th[data-column="+d+"]").addClass("filter-parsed").find(".tablesorter-header-inner").append('<span class="curvalue" />'),o=i.find("input[type=hidden]").on("change"+s.namespace+"filter",function(){var e=this.value,t=(p.isArray(r.compare)?i.find(f).val()||r.compare[r.selected||0]:r.compare)||"";e!==this.lastValue&&(this.lastValue=t?t+e:e==r.min?"":(r.exactMatch?"=":"")+e,this.value=this.lastValue,a(e))}),i.find(".range").on("change",function(){a(this.value)}),s.$table.on("filterFomatterUpdate",function(){var e=m.updateCompare(i,o,r)[0];i.find(".range").val(e),a(e,!1,!0),u.filter.formatterUpdated(i,d)}),r.compare&&(m.addCompare(i,d,r),i.find(f).on("change",function(){a()})),s.$table.on("stickyHeadersInit",function(){(c=s.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(d).empty()).html('<input class="range" type="range" min="'+r.min+'" max="'+r.max+'" value="'+r.value+'" />').find(".range").on("change",function(){a(c.find(".range").val())}),a(),r.compare&&(m.addCompare(c,d,r),c.find(f).on("change",function(){i.find(f).val(p(this).val()),a()}))}),i.closest("table").on("filterReset",function(){p.isArray(r.compare)&&i.add(c).find(f).val(r.compare[r.selected||0]),setTimeout(function(){a(r.value,!1,!0)},0)}),a()),t?i.find('input[type="hidden"]'):p('<input type="search">')},html5Color:function(l,i,e){function t(e,t){var a=!0,n=" ("+(e=(void 0===e?d.val():e).toString().replace("=","")||o.value)+")";o.addToggle&&(a=l.find(".toggle").is(":checked")),l.find(".colorpicker").length&&(l.find(".colorpicker").val(e)[0].disabled=o.disabled||!a),d.val(a?e+(o.exactMatch?"=":""):"").trigger(!c.$table[0].hasInitialized||t?"":"search"),(o.valueToHeader?l.closest("thead").find("th[data-column="+i+"]").find(".curcolor"):l.find(".currentColor")).html(n),r.length&&(r.find(".colorpicker").val(e)[0].disabled=o.disabled||!a,o.addToggle&&(r.find(".toggle")[0].checked=a),(o.valueToHeader?r.closest("thead").find("th[data-column="+i+"]").find(".curcolor"):r.find(".currentColor")).html(n))}var a,d,o=p.extend({value:"#000000",disabled:!1,addToggle:!0,exactMatch:!0,valueToHeader:!1,skipTest:!1},e),e=p('<input type="color" style="visibility:hidden;" value="test">').appendTo(l),n=o.skipTest||"color"===e.attr("type")&&"test"!==e.val(),r=[],c=l.closest("table")[0].config;return e.remove(),n&&(a=""+i+Math.round(100*Math.random()),a='<div class="color-controls-wrapper">'+(o.addToggle?'<div class="button"><input id="colorbutton'+a+'" type="checkbox" class="toggle" /><label for="colorbutton'+a+'"></label></div>':"")+'<input type="hidden"><input class="colorpicker" type="color" />'+(o.valueToHeader?"":'<span class="currentColor">(#000000)</span>')+"</div>",l.html(a),o.valueToHeader&&l.closest("thead").find("th[data-column="+i+"]").find(".tablesorter-header-inner").append('<span class="curcolor" />'),l.find(".toggle, .colorpicker").on("change",function(){t(l.find(".colorpicker").val())}),d=l.find("input[type=hidden]").on("change"+c.namespace+"filter",function(){t(this.value)}),c.$table.on("filterFomatterUpdate",function(){t(d.val(),!0),u.filter.formatterUpdated(l,i)}),l.closest("table").on("filterReset",function(){o.addToggle&&(l.find(".toggle")[0].checked=!1),setTimeout(function(){t()},0)}),c.$table.on("stickyHeadersInit",function(){(r=c.widgetOptions.$sticky.find(".tablesorter-filter-row").children().eq(i)).html(a).find(".toggle, .colorpicker").on("change",function(){t(r.find(".colorpicker").val())}),t(r.find(".colorpicker").val())}),t(o.value)),n?l.find('input[type="hidden"]'):p('<input type="search">')}})}(jQuery);return jQuery;}));
